# Модуль для работы с данными мемов и их фильтрацией

MEMES = []
MEME_SOURCES = ['VK']

# Список ключевых слов, указывающих на нежелательный контент (грязь, насилие, порнография)
EXCLUDED_KEYWORDS = [
    "порно", "секс", "насилие", "убийство", "кровь", "грязь", "мат", "обнажённый", "изнасилование",
    "смерть", "труп", "наркотики", "алкоголизм", "пьянство", "сиськи", "член", "жопа"
]

# Список ключевых слов, указывающих на новостной контент
NEWS_KEYWORDS = [
    "новости", "события", "происшествие", "сбой", "подорожал", "скорая помощь", "приобрести",
    "акции", "с 1 мая", "сегодня", "в москве", "в россии", "в подмосковье", "в сша",
    "трамп", "путин", "президент", "правительство", "закон", "суд", "приговор", "штраф",
    # Добавленные ключевые слова для новостей
    "рекордно", "вчера", "прекращает", "работа", "в подмосковье", "в сша", "трамп",
    "масштабный", "перезапуск", "сериал", "стартап", "планирует", "выпустить", "лекарство",
    "ожирение", "изобрели", "оценили", "федеральная служба", "расследование", "криминал",
    "дтп", "пожар", "наводнение", "землетрясение", "катастрофа"
]

# Список ключевых слов, указывающих на смешной контент для 18+ (без грязи)
HUMOR_KEYWORDS = [
    "шутка", "юмор", "смешно", "хаха", "лол", "кек", "рофл", "сарказм", "ирония",
    "отношения", "любовь", "развод", "свидание", "теща", "шутник", "взрослая жизнь",
    "работа", "офис", "коллеги", "начальник", "босс", "дедлайн", "переговорка",
    "кофе", "принтер", "it отдел", "программист", "проект", "тимлид", "менеджер",
    "кот", "пёс", "животные", "дети", "родители", "жена", "муж", "похер", "лень",
    "утро", "вечер", "похмелье", "друзья", "вечеринка", "провал", "фейл", "эпик",
    # Добавленные ключевые слова для юмора
    "мем", "троллинг", "абсурд", "анекдот", "шок", "прикол", "достал", "завис", "глюк",
    "гениально", "безумие", "хаос", "глупость", "чушь", "бред", "смех", "улыбка"
]

def is_suitable_meme(meme):
    """
    Проверяет, подходит ли мем для показа.
    Мем должен быть смешным, подходить для 18+ аудитории и не содержать нежелательный контент.
    Args:
        meme (dict): Словарь с данными мема, содержащий 'text' и 'image_url'.
    Returns:
        bool: True, если мем подходит, False — если нет.
    """
    text = meme.get("text", "").lower()
    image_url = meme.get("image_url", "")

    # Проверка на наличие текста или изображения
    if not text or not image_url:
        return False

    # Исключение нежелательного контента
    for keyword in EXCLUDED_KEYWORDS:
        if keyword in text:
            return False

    # Исключение новостного контента
    for keyword in NEWS_KEYWORDS:
        if keyword in text:
            return False

    # Проверка на наличие юмористического контента (обязательно)
    has_humor = False
    for keyword in HUMOR_KEYWORDS:
        if keyword in text:
            has_humor = True
            break

    # Дополнительная проверка: мемы часто короткие
    # Если текст длиннее 100 символов, скорее всего, это не мем
    if len(text) > 100:
        return False

    return has_humor
