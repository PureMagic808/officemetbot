# Инструкция по установке и настройке Telegram-бота для мемов (Обновленная версия)

## Важное обновление для Railway
Эта версия специально оптимизирована для работы на Railway и решает проблемы с загрузкой базы мемов. В новой версии внесены следующие исправления:

1. Реализована встроенная инициализация базы мемов даже при отсутствии кэш-файлов
2. Добавлена улучшенная система защиты от конфликтов при запуске нескольких экземпляров бота
3. Оптимизирована работа с файловой системой Railway
4. Улучшена обработка ошибок и восстановление при сбоях
5. Добавлены подробные логи для отслеживания проблем

## Шаги по установке на Railway

### 1. Подготовка бота в Telegram
1. Откройте [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. Получите и сохраните токен бота (TELEGRAM_BOT_TOKEN)

### 2. Создание проекта на Railway
1. Зарегистрируйтесь или войдите на [Railway](https://railway.app/)
2. Создайте новый проект (New Project)
3. Выберите "Deploy from GitHub repo" или загрузите файлы напрямую

### 3. Настройка переменных окружения
1. В настройках проекта Railway найдите раздел "Variables"
2. Добавьте переменные окружения:
   - `TELEGRAM_BOT_TOKEN` = ваш токен от BotFather (обязательно)
   - `VK_TOKEN` = ваш токен VK API (опционально, нужен для получения новых мемов)

### 4. Развертывание
1. Railway автоматически установит зависимости из requirements_railway.txt
2. Railway запустит бота согласно команде в Procfile
3. После успешного развертывания ваш бот заработает автоматически

## Проверка работоспособности
1. Откройте своего бота в Telegram
2. Отправьте команду `/start`
3. Бот должен ответить приветствием и отправить первый мем

## Решение проблем

### Бот не отвечает
1. Проверьте логи в Railway на наличие ошибок
2. Убедитесь, что переменная TELEGRAM_BOT_TOKEN настроена правильно
3. Проверьте, запущен ли сервис в Railway (должен быть статус "Healthy")

### Бот не показывает мемы
1. Проверьте логи на наличие ошибок загрузки мемов
2. Новая версия автоматически инициализирует базу мемов даже при отсутствии кэш-файлов
3. Если проблема сохраняется, попробуйте перезапустить проект в Railway

## Обновление бота
1. Для обновления бота загрузите новые файлы в ваш репозиторий на GitHub или непосредственно в Railway
2. Railway автоматически обнаружит изменения и перезапустит бота

## Техническая поддержка
Если у вас возникли проблемы с ботом, проверьте логи в Railway и обратитесь за помощью к разработчику.